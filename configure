#!/bin/sh

set -eu

CXX_CMD="${CXX:-$(R CMD config CXX)}"

CLANG_WNO_UNKNOWN_WARNING_OPTION=""
case "$CXX_CMD" in
  *clang*|*clang++*)
    CLANG_WNO_UNKNOWN_WARNING_OPTION="-Wno-unknown-warning-option"
    ;;
esac

sed \
  -e "s|@CLANG_WNO_UNKNOWN_WARNING_OPTION@|$CLANG_WNO_UNKNOWN_WARNING_OPTION|g" \
  src/Makevars.in > src/Makevars

exit 0

